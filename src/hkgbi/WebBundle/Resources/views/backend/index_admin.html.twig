{% extends "@hkgbiWeb/backend/layout_admin.html.twig" %}


{% block page_header %}首页{% endblock %}
{% block content %}

    {#通知公告块#}
    <div class="row">
      <div class="col-md-6">
          <div class="box box-solid">
            <div class="box-body">
                <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        {% for i in 0..count-1 %}
                        <li data-target="#carousel-example-generic" data-slide-to=i {% if i==0 %}class="active"{% endif %}></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner">
                        {% set i = 1 %}

                        {% for image in images %}
                            <div class="item {% if i==1 %}active{% endif %}">
                                <img src="{{ vich_uploader_asset(image,'imageFile') }}">
                            </div>
                            {% set i=i+1 %}
                        {% endfor %}
                    </div>
                    <a class="left carousel-control" style="width:10%" href="#carousel-example-generic" data-slide="prev">
                        <span class="fa fa-angle-left"></span>
                    </a>
                    <a class="right carousel-control"  style="width:10%" href="#carousel-example-generic" data-slide="next">
                        <span class="fa fa-angle-right"></span>
                    </a>
                </div>
            </div><!-- /.box-body -->
        </div><!-- /.box -->
      </div>
      <div class="col-md-3" style="width:20%">
            <div class="box box-primary" >
                <div class="box-header with-border">
                    <h3 class="box-title">首页幻灯片</h3>
                </div>


             <form name="slider" method="post" action="{{ path('index') }}" enctype="multipart/form-data">
                <div class="box-body">
                    <div class="form-group">
                        <label class="control-label" for="slider_imageFile_file">图片播放器</label>
                        <input type="file" id="slider_imageFile_file" name="slider[imageFile][file]">
                    </div>
                </div>
                <div class="box-footer">
                    <button class="btn btn-primary" type="submit" id="_submit" name="_submit" >保存修改</button>
                </div>
                {{ form_widget(slider_form._token) }}
              </form>




            </div>
      </div>
    </div>

    {#添加模块#}
    <div class="row">
        <div class="col-md-3">
            <div class="box box-default collapsed-box">
                <div class="box-header with-border">
                    <h3 class="box-title">模块</h3>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>

                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body" style="display: none;">
                    <ul>
                        {% for module in modules %}
                        <li>{{ module.getName() }}</li>
                        {% endfor %}
                    </ul>
                    <button class="btn btn-facebook box-tools pull-right" data-toggle="modal" data-target="#new_module" data-whatever="@mdo">添加模块</button>

                </div><!-- /.box-body -->
            </div><!-- /.box -->
        </div>
    </div>
    <div class="modal fade" id="new_module" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="exampleModalLabel">添加模块</h4>
                </div>
                <div class="modal-body">
                    {{ form_start(module_form) }}
                        <div class="form-group">
                            <label class="control-label required" for="form_name">请输入模块名称</label>
                            {{ form_widget(module_form.name) }}
                        </div>
                    {{ form_widget(module_form._token) }}

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="submit" class="btn btn-primary">确定添加</button>
                </div>
                {{ form_end(module_form) }}
            </div>
        </div>
    </div>


{% endblock %}

